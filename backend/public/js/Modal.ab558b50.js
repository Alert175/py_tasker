(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Modal"],{"714b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper-fixed grid-center"},["new_user"===e.property?r("div",{staticClass:"content grid-center"},[r("div",{staticClass:"header"},[e._v("Как к Вам обращаться?")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.new_user_name,expression:"new_user_name"}],attrs:{type:"text"},domProps:{value:e.new_user_name},on:{input:function(t){t.target.composing||(e.new_user_name=t.target.value)}}}),r("button",{on:{click:e.regitry_new_user}},[e._v("Готово")])]):e._e(),"old_user"===e.property?r("div",{staticClass:"content grid-center"},[r("div",{staticClass:"header"},[e._v("Введите ваш ID")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user_id,expression:"user_id"}],attrs:{type:"text"},domProps:{value:e.user_id},on:{input:function(t){t.target.composing||(e.user_id=t.target.value)}}}),r("button",{on:{click:e.login}},[e._v("Войти")])]):e._e(),r("transition",{attrs:{name:"show",mode:"out-in"}},[e.show_buffer?r("buffer",{attrs:{user_id:e.info_for_buffer},on:{close_buffer:e.buffer_close}}):e._e(),e.show_popup?r("popup",{attrs:{info:e.info_for_popup,color:e.popup_color},on:{close_popup:function(t){e.show_popup=!1}}}):e._e()],1)],1)},o=[],s=(r("96cf"),r("3b8d")),u=r("bc3a"),i={components:{buffer:function(){return r.e("Buffer").then(r.bind(null,"b0d0"))},popup:function(){return r.e("Popup").then(r.bind(null,"3905"))}},props:{settings:{type:String,default:void 0}},data:function(){return{property:null,new_user_name:null,show_buffer:!1,info_for_buffer:null,user_id:null,show_popup:!1,info_for_popup:null,popup_color:null}},methods:{read_props:function(){void 0!==this.settings&&(this.property=this.settings),console.log(this.property)},call_popup:function(e,t){this.info_for_popup=e,this.popup_color=t,this.show_popup=!0},buffer_close:function(){this.show_buffer=!1,null!==localStorage.getItem("user_id")&&(localStorage.setItem("auth",!0),this.$router.push("/"))},regitry_new_user:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===this.new_user_name||""===this.new_user_name){e.next=13;break}return e.prev=1,e.next=4,u.post("api/auth/create_user",{new_user_name:String(this.new_user_name)});case 4:t=e.sent,t.data.hasOwnProperty("id_user")&&(localStorage.setItem("user_id",t.data.id_user),this.info_for_buffer=t.data.id_user,this.show_buffer=!0),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error(e.t0);case 11:e.next=14;break;case 13:this.call_popup("необходимо заполнить поле","255, 98, 98, 1");case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,null===this.user_id||""===this.user_id){e.next=8;break}return e.next=4,u.post("api/auth/login",{user_id:JSON.stringify(this.user_id)});case 4:t=e.sent,"user_not_found"===t.data?this.call_popup("пользователь не найден","255, 98, 98, 1"):(localStorage.setItem("auth",!0),this.call_popup("Добро пожаловать ".concat(t.data.user_name),"83, 144, 219, 1"),this.$router.push("/")),e.next=9;break;case 8:this.call_popup("необходимо заполнить поле","255, 98, 98, 1");case 9:e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.error(e.t0),this.call_popup("попробуйте еще раз","255, 98, 98, 1");case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.read_props()}},a=i,p=(r("924e"),r("2877")),c=Object(p["a"])(a,n,o,!1,null,"7bdb1e40",null);t["default"]=c.exports},"924e":function(e,t,r){"use strict";var n=r("f872"),o=r.n(n);o.a},f872:function(e,t,r){}}]);
//# sourceMappingURL=Modal.ab558b50.js.map