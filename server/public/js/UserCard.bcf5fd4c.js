(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["UserCard"],{2957:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrapper-fixed"},[o("div",{staticClass:"close",on:{click:t.close}},[o("img",{staticClass:"icon-image",attrs:{src:"images/cancel.svg",alt:"close"}})]),o("div",{staticClass:"content grid-center"},[o("div",{staticClass:"header"},[t._v("информация пользователя")]),o("div",{staticClass:"key-user grid-center"},[o("div",{staticClass:"container grid-center"},[o("img",{staticClass:"icon-image",attrs:{src:"images/edit.svg",alt:"edit"}}),o("input",{ref:"user_key",attrs:{type:"text"},domProps:{value:t.info}})]),o("button",{on:{click:t.copy_id}},[t._v("Копировать")])]),o("div",{staticClass:"control grid-center"},[o("div",{staticClass:"item grid-center",on:{click:t.logout}},[o("img",{staticClass:"icon",attrs:{src:"images/logout.svg",alt:"logout"}}),o("button",[t._v("Выйти")])]),o("div",{staticClass:"item grid-center",on:{click:t.delete_user}},[o("img",{staticClass:"icon",attrs:{src:"images/delete.svg",alt:"delete_user"}}),o("button",[t._v("Удалить у.з.")])])]),o("transition",{attrs:{name:"show",mode:"out-in"}},[t.show_popup?o("popup",{attrs:{info:t.info_for_popup,color:t.popup_color},on:{close_popup:function(e){t.show_popup=!1}}}):t._e()],1)],1)])},i=[],r=(o("96cf"),o("3b8d")),n=o("bc3a"),a={props:{user_id:{type:String,default:null}},components:{popup:function(){return o.e("Popup").then(o.bind(null,"3905"))}},data:function(){return{info:null,show_popup:!1,info_for_popup:null,popup_color:"0, 0, 0, 0",warning_logout:!1,warning_delete_user:!1}},methods:{call_popup:function(t,e){this.info_for_popup=t,this.popup_color=e,this.show_popup=!0},read_props:function(){null!==this.user_id?this.info=this.user_id:null!==localStorage.getItem("user_id")?this.info=localStorage.getItem("user_id"):console.error("user info not found")},copy_id:function(){var t=this;try{var e=this.$refs.user_key;e.select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.info_for_popup="Готово",this.popup_color="102, 170, 255, 1",this.show_popup=!0,setTimeout((function(){t.close()}),1e3)}catch(o){this.info_for_popup="ошибка при копировании",this.popup_color="255, 98, 98, 1",this.show_popup=!0}},close:function(){this.$emit("close_user_info")},logout:function(){!1===this.warning_logout?(this.call_popup("Не забудьте сохранить ID пользователя, для выхода нажмите кнопку еще раз","255, 98, 98, 1"),this.warning_logout=!0):(localStorage.removeItem("user_id"),localStorage.removeItem("auth"),this.$router.push("/"))},delete_user:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==this.warning_delete_user){t.next=5;break}this.call_popup("Внимание, ваша учетная запись будет безвозратно удалена, для подтверждения нажмите кнопку еще раз","255, 98, 98, 1"),this.warning_delete_user=!0,t.next=15;break;case 5:return t.prev=5,t.next=8,n.post("api/auth/delete_user",{id_user:localStorage.getItem("user_id")});case 8:e=t.sent,200==e.status&&(localStorage.removeItem("user_id"),localStorage.removeItem("auth"),this.$router.push("/")),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),console.error(t.t0.response);case 15:case"end":return t.stop()}}),t,this,[[5,12]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.read_props()}},c=a,u=(o("a901"),o("2877")),p=Object(u["a"])(c,s,i,!1,null,"1fe239a2",null);e["default"]=p.exports},"8d97":function(t,e,o){},a901:function(t,e,o){"use strict";var s=o("8d97"),i=o.n(s);i.a}}]);
//# sourceMappingURL=UserCard.bcf5fd4c.js.map